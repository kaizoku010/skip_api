<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SK!P API EndPoints</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@mui/material@5.0.0/dist/material-ui.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@mui/material@5.0.0/dist/material-ui.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        h1 {
            text-align: center;
        }
        .skip-api-header {
            height: 8rem;
            background-size: cover;
            background-image: url("https://signup.heroku.com/assets/page-illustration-11400c2a5109317ad7e99571ba2a42bc55522ffa8ea6f9dcdff99737ab6149ac.png");
        }
        .example {
            margin-top: 10px;
        }
        .example pre {
            background: #e8e8e8;
            padding: 10px;
            border: 1px solid #ccc;
        }
        .collapsible-content {
            display: none;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="skip-api-header"> 
        <h1>SK!P API Documentation</h1>
        <p style="text-align: center;">These are routes/endpoints that connect you to the SK!P server and Firebase/MongoDB for easy operations.</p>
    </div>
    <h3>API Routes</h3>
    <div id="api-table"></div>

    <script>
        const apiRoutes = [
            {
                method: 'GET',
                route: '/api/events',
                description: 'Fetch all events',
                example: {
                    request: 'GET /api/events',
                    response: JSON.stringify({
                        events: [
                            {
                                eventId: '1',
                                eventName: 'Sample Event',
                                eventDate: '2024-08-08T00:00:00Z',
                                eventGraphicsURL: 'https://example.com/event.jpg'
                            }
                        ]
                    }, null, 2)
                }
            },
            {
                method: 'GET',
                route: '/api/attendees',
                description: 'Fetch all attendees',
                example: {
                    request: 'GET /api/attendees',
                    response: JSON.stringify({
                        attendees: [
                            {
                                uid: '1',
                                userName: 'John Doe',
                                bio: 'Enthusiastic attendee'
                            }
                        ]
                    }, null, 2)
                }
            },
            // Add other routes here
        ];

        function toggleCollapse(id) {
            const content = document.getElementById(id);
            content.style.display = content.style.display === 'none' ? 'block' : 'none';
        }

        function renderTable() {
            const table = `
                <table class="mui-table">
                    <thead>
                        <tr>
                            <th>Method</th>
                            <th>Route</th>
                            <th>Description</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${apiRoutes.map(route => `
                            <tr>
                                <td>${route.method}</td>
                                <td>${route.route}</td>
                                <td>${route.description}</td>
                                <td>
                                    <span class="mui-icon-button" onclick="toggleCollapse('${route.route.replace('/', '')}-example')">
                                        <i class="material-icons">expand_more</i>
                                    </span>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="4">
                                    <div class="collapsible-content" id="${route.route.replace('/', '')}-example">
                                        <div class="example">
                                            <h4>Request</h4>
                                            <pre>${route.example.request}</pre>
                                            <h4>Response</h4>
                                            <pre>${route.example.response}</pre>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
            `;
            document.getElementById('api-table').innerHTML = table;
        }

        renderTable();
    </script>
</body>
</html>
